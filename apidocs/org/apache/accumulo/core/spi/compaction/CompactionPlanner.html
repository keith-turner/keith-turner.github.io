<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.6) on Fri Apr 17 16:56:34 EDT 2020 -->
<title>CompactionPlanner (Apache Accumulo Core 2.1.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-04-17">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CompactionPlanner (Apache Accumulo Core 2.1.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CompactionPlanner.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.accumulo.core.spi.compaction</a></div>
<h2 title="Interface CompactionPlanner" class="title">Interface CompactionPlanner</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="LarsmaCompactionPlanner.html" title="class in org.apache.accumulo.core.spi.compaction">LarsmaCompactionPlanner</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">CompactionPlanner</span></pre>
<div class="block">Plans compaction work for a compaction service.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>2.1.0</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="package-summary.html"><code>org.apache.accumulo.core.spi.compaction</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="CompactionPlanner.InitParameters.html" title="interface in org.apache.accumulo.core.spi.compaction">CompactionPlanner.InitParameters</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="CompactionPlanner.PlanningParameters.html" title="interface in org.apache.accumulo.core.spi.compaction">CompactionPlanner.PlanningParameters</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#init(org.apache.accumulo.core.spi.compaction.CompactionPlanner.InitParameters)">init</a></span>&#8203;(<a href="CompactionPlanner.InitParameters.html" title="interface in org.apache.accumulo.core.spi.compaction">CompactionPlanner.InitParameters</a>&nbsp;params)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="CompactionPlan.html" title="class in org.apache.accumulo.core.spi.compaction">CompactionPlan</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#makePlan(org.apache.accumulo.core.spi.compaction.CompactionPlanner.PlanningParameters)">makePlan</a></span>&#8203;(<a href="CompactionPlanner.PlanningParameters.html" title="interface in org.apache.accumulo.core.spi.compaction">CompactionPlanner.PlanningParameters</a>&nbsp;params)</code></th>
<td class="colLast">
<div class="block">
 Plan what work a compaction service should do.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="init(org.apache.accumulo.core.spi.compaction.CompactionPlanner.InitParameters)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre class="methodSignature">void&nbsp;init&#8203;(<a href="CompactionPlanner.InitParameters.html" title="interface in org.apache.accumulo.core.spi.compaction">CompactionPlanner.InitParameters</a>&nbsp;params)</pre>
</li>
</ul>
<a id="makePlan(org.apache.accumulo.core.spi.compaction.CompactionPlanner.PlanningParameters)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>makePlan</h4>
<pre class="methodSignature"><a href="CompactionPlan.html" title="class in org.apache.accumulo.core.spi.compaction">CompactionPlan</a>&nbsp;makePlan&#8203;(<a href="CompactionPlanner.PlanningParameters.html" title="interface in org.apache.accumulo.core.spi.compaction">CompactionPlanner.PlanningParameters</a>&nbsp;params)</pre>
<div class="block"><p>
 Plan what work a compaction service should do. The kind of compaction returned by
 <a href="CompactionPlanner.PlanningParameters.html#getKind()"><code>CompactionPlanner.PlanningParameters.getKind()</code></a> determines what must be done with the files returned by
 <a href="CompactionPlanner.PlanningParameters.html#getCandidates()"><code>CompactionPlanner.PlanningParameters.getCandidates()</code></a>. The following are the expectations for the
 candidates for each kind.

 <ul>
 <li>CompactionKind.SYSTEM The planner is not required to do anything with the candidates and
 can choose to compact zero or more of them. The candidates may represent a subset of all the
 files in the case where a user compaction is in progress or other compactions are running.
 <li>CompactionKind.USER and CompactionKind.SELECTED. The planner is required to eventually
 compact all candidates. Its ok to return a compaction plan that compacts a subset. When the
 planner compacts a subset, it will eventually be called again later. When it is called later
 the candidates will contain the files it did not compact and the results of any previous
 compactions it scheduled. The planner must eventually compact all of the files in the candidate
 set down to a single file. The compaction service will keep calling the planner until it does.
 <li>CompactionKind.CHOP. The planner is required to eventually compact all candidates. One
 major difference with USER compactions is this kind is not required to compact all files to a
 single file. It is ok to return a compaction plan that compacts a subset of the candidates.
 When the planner compacts a subset, it will eventually be called later. When it is called later
 the candidates will contain the files it did not compact.
 </ul>

 <p>
 For a chop compaction assume the following happens.
 <ol>
 <li>The candidate set passed to makePlan contains the files <code>[F1,F2,F3,F4]</code> and kind is
 CHOP
 <li>The planner returns a job to compact files <code>[F1,F2]</code> on executor E1
 <li>The compaction runs compacting <code>[F1,F2]</code> into file <code>[F5]</code>
 </ol>

 <p>
 For the case above, eventually the planner will called again with a candidate set of
 <code>[F3,F4]</code> and it must eventually compact those two files.

 <p>
 For a user and selector compaction assume the same thing happens, it will result in a slightly
 different outcome.
 <ol>
 <li>The candidate set passed to makePlan contains the files <code>[F1,F2,F3,F4]</code> and kind is
 USER
 <li>The planner returns a job to compact files <code>[F1,F2]</code> on executor E1
 <li>The compaction runs compacting <code>[F1,F2]</code> into file <code>[F5]</code>
 </ol>

 <p>
 For the case above, eventually the planner will called again with a candidate set of
 <code>[F3,F4,F5]</code> and it must eventually compact those three files to one. The difference with
 CHOP compactions is that the result of intermediate compactions are included in the candidate
 set.

 <p>
 When a planner returns a compactions plan, task will be queued on executors. Previously queued
 task that do not match the latest plan are removed. The planner is called periodically,
 whenever a new file is added, and whenever a compaction finishes.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="CompactionKind.html" title="enum in org.apache.accumulo.core.spi.compaction"><code>CompactionKind</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CompactionPlanner.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2011&#x2013;2020 <a href="https://www.apache.org">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
