<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.6) on Fri Apr 17 19:26:52 EDT 2020 -->
<title>LruBlockCache (Apache Accumulo Core 2.1.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-04-17">
<link rel="stylesheet" type="text/css" href="../../../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LruBlockCache (Apache Accumulo Core 2.1.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":9,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LruBlockCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.accumulo.core.file.blockfile.cache.lru</a></div>
<h2 title="Class LruBlockCache" class="title">Class LruBlockCache</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="SynchronousLoadingBlockCache.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">org.apache.accumulo.core.file.blockfile.cache.lru.SynchronousLoadingBlockCache</a></li>
<li>
<ul class="inheritance">
<li>org.apache.accumulo.core.file.blockfile.cache.lru.LruBlockCache</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache.lru">HeapSize</a></code>, <code><a href="../../../../spi/cache/BlockCache.html" title="interface in org.apache.accumulo.core.spi.cache">BlockCache</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">LruBlockCache</span>
extends <a href="SynchronousLoadingBlockCache.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">SynchronousLoadingBlockCache</a>
implements <a href="../../../../spi/cache/BlockCache.html" title="interface in org.apache.accumulo.core.spi.cache">BlockCache</a>, <a href="HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache.lru">HeapSize</a></pre>
<div class="block">A block cache implementation that is memory-aware using <a href="HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache.lru"><code>HeapSize</code></a>, memory-bound using an
 LRU eviction algorithm, and concurrent: backed by a <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="class or interface in java.util.concurrent" class="externalLink"><code>ConcurrentHashMap</code></a> and with a
 non-blocking eviction thread giving constant-time <a href="#cacheBlock(java.lang.String,byte%5B%5D,boolean)"><code>cacheBlock(java.lang.String, byte[], boolean)</code></a> and <a href="#getBlock(java.lang.String)"><code>getBlock(java.lang.String)</code></a>
 operations.

 <p>
 Contains three levels of block priority to allow for scan-resistance and in-memory families. A
 block is added with an inMemory flag if necessary, otherwise a block becomes a single access
 priority. Once a blocked is accessed again, it changes to multiple access. This is used to
 prevent scans from thrashing the cache, adding a least-frequently-used element to the eviction
 algorithm.

 <p>
 Each priority is given its own chunk of the total cache to ensure fairness during eviction. Each
 priority will retain close to its maximum size, however, if any priority is not using its entire
 chunk the others are able to grow beyond their chunk size.

 <p>
 Instantiated at a minimum with the total size and average block size. All sizes are in bytes. The
 block size is not especially important as this cache is fully dynamic in its sizing of blocks. It
 is only used for pre-allocating data structures and in initial heap estimation of the map.

 <p>
 The detailed constructor defines the sizes for the three priorities (they should total to the
 maximum size defined). It also sets the levels that trigger and control the eviction thread.

 <p>
 The acceptable size is the cache size level which triggers the eviction process to start. It
 evicts enough blocks to get the size below the minimum size specified.

 <p>
 Eviction happens in a separate thread and involves a single full-scan of the map. It determines
 how many bytes must be freed to reach the minimum size, and then while scanning determines the
 fewest least-recently-used blocks necessary from each of the three priorities (would be 3 times
 bytes to free). It then uses the priority chunk sizes to evict fairly according to the relative
 sizes and usage.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">LruBlockCache.CacheStats</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="nested.classes.inherited.from.class.org.apache.accumulo.core.spi.cache.BlockCache">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;org.apache.accumulo.core.spi.cache.<a href="../../../../spi/cache/BlockCache.html" title="interface in org.apache.accumulo.core.spi.cache">BlockCache</a></h3>
<code><a href="../../../../spi/cache/BlockCache.Loader.html" title="interface in org.apache.accumulo.core.spi.cache">BlockCache.Loader</a>, <a href="../../../../spi/cache/BlockCache.Stats.html" title="interface in org.apache.accumulo.core.spi.cache">BlockCache.Stats</a></code></li>
</ul>
</li>
</ul>
</section>
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#CACHE_FIXED_OVERHEAD">CACHE_FIXED_OVERHEAD</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.apache.accumulo.core.file.blockfile.cache.lru.LruBlockCacheConfiguration)">LruBlockCache</a></span>&#8203;(<a href="LruBlockCacheConfiguration.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">LruBlockCacheConfiguration</a>&nbsp;conf)</code></th>
<td class="colLast">
<div class="block">Default constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../spi/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.spi.cache">CacheEntry</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cacheBlock(java.lang.String,byte%5B%5D)">cacheBlock</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;blockName,
          byte[]&nbsp;buf)</code></th>
<td class="colLast">
<div class="block">Cache the block with the specified name and buffer.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../spi/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.spi.cache">CacheEntry</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cacheBlock(java.lang.String,byte%5B%5D,boolean)">cacheBlock</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;blockName,
          byte[]&nbsp;buf,
          boolean&nbsp;inMemory)</code></th>
<td class="colLast">
<div class="block">Cache the block with the specified name and buffer.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#calculateOverhead(long,long,int)">calculateOverhead</a></span>&#8203;(long&nbsp;maxSize,
                 long&nbsp;blockSize,
                 int&nbsp;concurrency)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#evictBlock(org.apache.accumulo.core.file.blockfile.cache.lru.CachedBlock)">evictBlock</a></span>&#8203;(<a href="CachedBlock.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">CachedBlock</a>&nbsp;block)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../spi/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.spi.cache">CacheEntry</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBlock(java.lang.String)">getBlock</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;blockName)</code></th>
<td class="colLast">
<div class="block">Get the buffer of the block with the specified name.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../spi/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.spi.cache">CacheEntry</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBlockNoStats(java.lang.String)">getBlockNoStats</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;blockName)</code></th>
<td class="colLast">
<div class="block">Get a block from the cache without changing any stats the cache is keeping.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentSize()">getCurrentSize</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the current size of this cache.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEvictedCount()">getEvictedCount</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the number of blocks that have been evicted during the lifetime of this cache.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEvictionCount()">getEvictionCount</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the number of eviction runs that have occurred</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFreeSize()">getFreeSize</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the current size of this cache.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxEntrySize()">getMaxEntrySize</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the maximum size of an individual cache entry.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxHeapSize()">getMaxHeapSize</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the maximum amount of on heap memory this cache will use.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxSize()">getMaxSize</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the maximum size of this cache.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getOverhead()">getOverhead</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code><a href="LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">LruBlockCache.CacheStats</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getStats()">getStats</a></span>()</code></th>
<td class="colLast">
<div class="block">Get counter statistics for this cache.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#heapSize()">heapSize</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#logStats()">logStats</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shutdown()">shutdown</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#size()">size</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the size of this cache (number of cached blocks)</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.accumulo.core.file.blockfile.cache.lru.SynchronousLoadingBlockCache">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.accumulo.core.file.blockfile.cache.lru.<a href="SynchronousLoadingBlockCache.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">SynchronousLoadingBlockCache</a></h3>
<code><a href="SynchronousLoadingBlockCache.html#getBlock(java.lang.String,org.apache.accumulo.core.spi.cache.BlockCache.Loader)">getBlock</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.org.apache.accumulo.core.spi.cache.BlockCache">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.accumulo.core.spi.cache.<a href="../../../../spi/cache/BlockCache.html" title="interface in org.apache.accumulo.core.spi.cache">BlockCache</a></h3>
<code><a href="../../../../spi/cache/BlockCache.html#getBlock(java.lang.String,org.apache.accumulo.core.spi.cache.BlockCache.Loader)">getBlock</a></code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="CACHE_FIXED_OVERHEAD">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CACHE_FIXED_OVERHEAD</h4>
<pre>public static final&nbsp;long CACHE_FIXED_OVERHEAD</pre>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(org.apache.accumulo.core.file.blockfile.cache.lru.LruBlockCacheConfiguration)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache&#8203;(<a href="LruBlockCacheConfiguration.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">LruBlockCacheConfiguration</a>&nbsp;conf)</pre>
<div class="block">Default constructor. Specify maximum size and expected average block size (approximation is
 fine).

 <p>
 All other factors will be calculated based on defaults specified in this class.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>conf</code> - block cache configuration</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getOverhead()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOverhead</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getOverhead()</pre>
</li>
</ul>
<a id="cacheBlock(java.lang.String,byte[],boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheBlock</h4>
<pre class="methodSignature">public&nbsp;<a href="../../../../spi/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.spi.cache">CacheEntry</a>&nbsp;cacheBlock&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;blockName,
                             byte[]&nbsp;buf,
                             boolean&nbsp;inMemory)</pre>
<div class="block">Cache the block with the specified name and buffer.
 <p>
 It is assumed this will NEVER be called on an already cached block. If that is done, it is
 assumed that you are reinserting the same exact block due to a race condition and will update
 the buffer but not modify the size of the cache.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>blockName</code> - block name</dd>
<dd><code>buf</code> - block buffer</dd>
<dd><code>inMemory</code> - if block is in-memory</dd>
</dl>
</li>
</ul>
<a id="cacheBlock(java.lang.String,byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheBlock</h4>
<pre class="methodSignature">public&nbsp;<a href="../../../../spi/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.spi.cache">CacheEntry</a>&nbsp;cacheBlock&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;blockName,
                             byte[]&nbsp;buf)</pre>
<div class="block">Cache the block with the specified name and buffer.
 <p>
 It is assumed this will NEVER be called on an already cached block. If that is done, it is
 assumed that you are reinserting the same exact block due to a race condition and will update
 the buffer but not modify the size of the cache.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../spi/cache/BlockCache.html#cacheBlock(java.lang.String,byte%5B%5D)">cacheBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../spi/cache/BlockCache.html" title="interface in org.apache.accumulo.core.spi.cache">BlockCache</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>blockName</code> - block name</dd>
<dd><code>buf</code> - block buffer</dd>
</dl>
</li>
</ul>
<a id="getBlock(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlock</h4>
<pre class="methodSignature">public&nbsp;<a href="../../../../spi/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.spi.cache">CacheEntry</a>&nbsp;getBlock&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;blockName)</pre>
<div class="block">Get the buffer of the block with the specified name.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../spi/cache/BlockCache.html#getBlock(java.lang.String)">getBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../spi/cache/BlockCache.html" title="interface in org.apache.accumulo.core.spi.cache">BlockCache</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>blockName</code> - block name</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>buffer of specified block name, or null if not in cache</dd>
</dl>
</li>
</ul>
<a id="getBlockNoStats(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockNoStats</h4>
<pre class="methodSignature">protected&nbsp;<a href="../../../../spi/cache/CacheEntry.html" title="interface in org.apache.accumulo.core.spi.cache">CacheEntry</a>&nbsp;getBlockNoStats&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;blockName)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="SynchronousLoadingBlockCache.html#getBlockNoStats(java.lang.String)">SynchronousLoadingBlockCache</a></code></span></div>
<div class="block">Get a block from the cache without changing any stats the cache is keeping.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="SynchronousLoadingBlockCache.html#getBlockNoStats(java.lang.String)">getBlockNoStats</a></code>&nbsp;in class&nbsp;<code><a href="SynchronousLoadingBlockCache.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">SynchronousLoadingBlockCache</a></code></dd>
</dl>
</li>
</ul>
<a id="evictBlock(org.apache.accumulo.core.file.blockfile.cache.lru.CachedBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>evictBlock</h4>
<pre class="methodSignature">protected&nbsp;long&nbsp;evictBlock&#8203;(<a href="CachedBlock.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">CachedBlock</a>&nbsp;block)</pre>
</li>
</ul>
<a id="getMaxHeapSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxHeapSize</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getMaxHeapSize()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../spi/cache/BlockCache.html#getMaxHeapSize()">BlockCache</a></code></span></div>
<div class="block">Get the maximum amount of on heap memory this cache will use.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../spi/cache/BlockCache.html#getMaxHeapSize()">getMaxHeapSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../spi/cache/BlockCache.html" title="interface in org.apache.accumulo.core.spi.cache">BlockCache</a></code></dd>
</dl>
</li>
</ul>
<a id="getMaxSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSize</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getMaxSize()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../spi/cache/BlockCache.html#getMaxSize()">BlockCache</a></code></span></div>
<div class="block">Get the maximum size of this cache.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../spi/cache/BlockCache.html#getMaxSize()">getMaxSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../spi/cache/BlockCache.html" title="interface in org.apache.accumulo.core.spi.cache">BlockCache</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>max size in bytes</dd>
</dl>
</li>
</ul>
<a id="getMaxEntrySize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxEntrySize</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;getMaxEntrySize()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="SynchronousLoadingBlockCache.html#getMaxEntrySize()">SynchronousLoadingBlockCache</a></code></span></div>
<div class="block">Get the maximum size of an individual cache entry.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="SynchronousLoadingBlockCache.html#getMaxEntrySize()">getMaxEntrySize</a></code>&nbsp;in class&nbsp;<code><a href="SynchronousLoadingBlockCache.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">SynchronousLoadingBlockCache</a></code></dd>
</dl>
</li>
</ul>
<a id="getCurrentSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentSize</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getCurrentSize()</pre>
<div class="block">Get the current size of this cache.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>current size in bytes</dd>
</dl>
</li>
</ul>
<a id="getFreeSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFreeSize</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getFreeSize()</pre>
<div class="block">Get the current size of this cache.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>current size in bytes</dd>
</dl>
</li>
</ul>
<a id="size()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;size()</pre>
<div class="block">Get the size of this cache (number of cached blocks)</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of cached blocks</dd>
</dl>
</li>
</ul>
<a id="getEvictionCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEvictionCount</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getEvictionCount()</pre>
<div class="block">Get the number of eviction runs that have occurred</div>
</li>
</ul>
<a id="getEvictedCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEvictedCount</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;getEvictedCount()</pre>
<div class="block">Get the number of blocks that have been evicted during the lifetime of this cache.</div>
</li>
</ul>
<a id="logStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logStats</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;logStats()</pre>
</li>
</ul>
<a id="getStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStats</h4>
<pre class="methodSignature">public&nbsp;<a href="LruBlockCache.CacheStats.html" title="class in org.apache.accumulo.core.file.blockfile.cache.lru">LruBlockCache.CacheStats</a>&nbsp;getStats()</pre>
<div class="block">Get counter statistics for this cache.

 <p>
 Includes: total accesses, hits, misses, evicted blocks, and runs of the eviction processes.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../spi/cache/BlockCache.html#getStats()">getStats</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../spi/cache/BlockCache.html" title="interface in org.apache.accumulo.core.spi.cache">BlockCache</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>statistics</dd>
</dl>
</li>
</ul>
<a id="heapSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heapSize</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;heapSize()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="HeapSize.html#heapSize()">heapSize</a></code>&nbsp;in interface&nbsp;<code><a href="HeapSize.html" title="interface in org.apache.accumulo.core.file.blockfile.cache.lru">HeapSize</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Approximate 'exclusive deep size' of implementing object. Includes count of payload and
         hosting object sizings.</dd>
</dl>
</li>
</ul>
<a id="calculateOverhead(long,long,int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateOverhead</h4>
<pre class="methodSignature">public static&nbsp;long&nbsp;calculateOverhead&#8203;(long&nbsp;maxSize,
                                     long&nbsp;blockSize,
                                     int&nbsp;concurrency)</pre>
</li>
</ul>
<a id="shutdown()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>shutdown</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;shutdown()</pre>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LruBlockCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2011&#x2013;2020 <a href="https://www.apache.org">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
